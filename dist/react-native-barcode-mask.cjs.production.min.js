"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react-native"),n=require("react"),o=e(n),r=require("react-native-reanimated"),i=e(r),a=require("fleetback-react-native-camera");function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=i.Value,s=i.Clock,h=i.block,l=i.cond,f=i.set,g=i.startClock,m=i.timing,p=i.eq,b=function(){},y=n.memo((function(e){var n=e.width,r=e.height,a=e.startValue,u=e.destinationValue,c=e.backgroundColor,h=e.edgeBorderWidth,l=e.edgeColor,f=e.edgeHeight,g=e.edgeWidth,m=e.edgeRadius,p=e.maskOpacity,y=e.animatedComponent,w=e.animatedLineColor,C=e.animatedLineOrientation,L=e.animatedLineThickness,v=e.animationDuration,B=e.showAnimatedLine,k=e.runTimingFn,x=e.onLayoutChange,O=e.outerBoundingRect,W=e.onOuterLayout,E=o.useRef({topRight:{borderRightWidth:h,borderTopWidth:h,borderTopRightRadius:m,top:-h,right:-h},topLeft:{borderTopWidth:h,borderLeftWidth:h,borderTopLeftRadius:m,top:-h,left:-h},bottomRight:{borderBottomWidth:h,borderRightWidth:h,borderBottomRightRadius:m,bottom:-h,right:-h},bottomLeft:{borderBottomWidth:h,borderLeftWidth:h,borderBottomLeftRadius:m,bottom:-h,left:-h}}),T=function(e,t){var n,o=null!=(n=null==O?void 0:O[t])?n:0;return e?"number"==typeof e?.9*e:e.endsWith("%")?Number(e.split("%")[0])/100*(o||1)*.9:Number(e.split(/\d+/)[0])*(o||1)*.9:.9*o},V=function(e,t){return T(e,t)/.9-L},j=function(e){return o.createElement(t.View,{style:d({},{width:g,height:f,borderColor:l,zIndex:2},R[e],E.current[e])})},N=T(n,"width")/.9,F=T(r,"height")/.9;return o.createElement(t.View,{style:R.container},o.createElement(t.View,{onLayout:x||b,style:d({},R.finder,{width:N,height:F})},j("topLeft"),j("topRight"),j("bottomLeft"),j("bottomRight"),B?y?y(N,F):o.createElement(i.View,{style:function(){if("horizontal"===C){var e=T(n,"width"),t=V(r,"height");return d({},R.animatedLine,{height:L,width:e,backgroundColor:w,top:k(new s,a||0,u||t,v)})}var o=T(r,"height"),i=V(n,"width");return d({},R.animatedLine,{width:L,height:o,backgroundColor:w,left:k(new s,a||0,u||i,v)})}()}):null),o.createElement(t.View,{style:R.maskOuter,onLayout:W||b},o.createElement(t.View,{style:d({},R.maskRow,{backgroundColor:c,opacity:p,flex:1})}),o.createElement(t.View,{style:d({height:r},R.maskCenter)},o.createElement(t.View,{style:{backgroundColor:c,opacity:p,flex:1}}),o.createElement(t.View,{style:d({},R.maskInner,{width:n,height:r,borderRadius:m})}),o.createElement(t.View,{style:{backgroundColor:c,opacity:p,flex:1}})),o.createElement(t.View,{style:d({},R.maskRow,{backgroundColor:c,opacity:p,flex:1})})))}));y.defaultProps={width:280,height:230,edgeWidth:20,edgeHeight:20,edgeColor:"#fff",edgeBorderWidth:4,edgeRadius:0,backgroundColor:"#eee",maskOpacity:1,animatedLineColor:"#fff",animatedLineOrientation:"horizontal",animatedLineThickness:2,animationDuration:2e3,runTimingFn:function(e,t,n,o){var i={finished:new c(0),position:new c(t),time:new c(0),frameTime:new c(0)},a={duration:o,toValue:new c(n),easing:r.Easing.inOut(r.Easing.ease)};return h([g(e),m(e,i,a),l(i.finished,[f(i.finished,0),f(i.time,0),f(i.frameTime,0),f(i.position,l(p(i.position,n),n,t)),f(a.toValue,l(p(i.position,n),t,n))]),i.position])},showAnimatedLine:!0};var R=t.StyleSheet.create({container:d({alignItems:"center",justifyContent:"center"},t.StyleSheet.absoluteFillObject),finder:{alignItems:"center",justifyContent:"center",zIndex:1},maskOuter:{position:"absolute",top:0,left:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"space-around"},maskInner:{backgroundColor:"transparent"},maskRow:{width:"100%"},maskCenter:{flexDirection:"row",display:"flex"},topLeft:{position:"absolute",top:0,left:0},topRight:{position:"absolute",top:0,right:0},bottomLeft:{position:"absolute",bottom:0,left:0},bottomRight:{position:"absolute",bottom:0,right:0},animatedLine:{position:"absolute",zIndex:1}}),w=function(e){var t,r=e.displayName||e.name||"Component";return(t=function(t){var n,r;function i(){var e;return(e=t.apply(this,arguments)||this).state={boundingRect:{x:0,y:0,width:0,height:0}},e.onOuterLayout=function(t){e.setState({boundingRect:t.nativeEvent.layout})},e}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,u(n,r),i.prototype.render=function(){return o.createElement(e,Object.assign({outerBoundingRect:this.state.boundingRect,onOuterLayout:this.onOuterLayout},this.props))},i}(n.PureComponent)).displayName="withOuterLayout"+r,t},C=function(e,t,o){var r,i,a=n.useState(!1),u=a[0],c=a[1],s=n.useReducer((function(e,t){switch(t.type){case"SET":return d({},e,t.payload);default:return e}}),{width:0,height:0,x:0,y:0}),h=s[0],l=s[1],f=n.useCallback((function(e){var t=e.nativeEvent.layout;l({type:"SET",payload:{height:t.height,width:t.width,x:t.x,y:t.y}})}),[h.height,h.width,h.x,h.y]);return!o||o&&"number"==typeof o?(r&&clearTimeout(r),i=function(n){c(!0),t(e(n)),r=setTimeout((function(){c(!1)}),o)}):i=function(n){null==o||null==o.beforeScan||o.beforeScan(),t(e(n)),null==o||null==o.afterScan||o.afterScan()},{barcodeRead:o&&"object"==typeof o?null:u,finderX:h.x,finderY:h.y,finderWidth:h.width,finderHeight:h.height,onBarcodeFinderLayoutChange:f,processingReadBarcode:i}},L=t.Platform.select({android:function(e,o,r,i,d,u,c){return n.useCallback((function(n){if(o&&!e){var s=n.bounds.origin.map((function(e){return{x:Number(e.x)/t.PixelRatio.get(),y:Number(e.y)/t.PixelRatio.get()}})),h=function(e){var t=e.x,n=e.y;return t>=r&&t<=r+d&&n>=i&&n<=i+u};if(n.type===a.RNCamera.Constants.BarCodeType.pdf417){var l=s[1],f=s[2],g=s[3];if(h(s[0])&&h(l)&&h(f)&&h(g))return void c(n.data)}if(n.type===a.RNCamera.Constants.BarCodeType.qr){var m=s[1],p=s[2],b=s[3];if(h(s[0])&&h(m)&&h(p)&&h(b))return void c(n.data)}}}),[e,o,r,i,d,u,c])},ios:function(e,t,o,r,i,a,d){return n.useCallback((function(n){if(t&&!e){var u=n.bounds,c=u.origin,s=c.x,h=c.y,l=u.size,f=l.width,g=l.height;return Number(s)>=o&&Number(s)+Number(f)<=o+i&&Number(h)>=r&&Number(h)+Number(g)<=r+a?d(n.data):void 0}}),[e,t,o,r,i,a,d])}}),v=t.Platform.select({android:function(e,t,n,o){void 0===o&&(o=500);var r=C(t,n,o),i=r.barcodeRead,a=r.onBarcodeFinderLayoutChange;return{barcodeRead:i,onBarcodeRead:L(null!=i&&i,e,r.finderX,r.finderY,r.finderWidth,r.finderHeight,r.processingReadBarcode),onBarcodeFinderLayoutChange:a}},ios:function(e,t,n,o){void 0===o&&(o=500);var r=C(t,n,o),i=r.barcodeRead,a=r.onBarcodeFinderLayoutChange;return{barcodeRead:i,onBarcodeRead:L(null!=i&&i,e,r.finderX,r.finderY,r.finderWidth,r.finderHeight,r.processingReadBarcode),onBarcodeFinderLayoutChange:a}}}),B=t.Platform.select({android:function(e,t,n,o,r){var i=C(t,n,o),a=i.barcodeRead,d=i.onBarcodeFinderLayoutChange,u=i.finderY,c=i.finderX,s=i.finderWidth,h=i.finderHeight,l=i.processingReadBarcode;return{barcodeRead:a,onBarcodeRead:r?r({x:c,y:u,width:s,height:h},l):L(null!=a&&a,e,c,u,s,h,l),onBarcodeFinderLayoutChange:d}},ios:function(e,t,n,o,r){var i=C(t,n,o),a=i.barcodeRead,d=i.onBarcodeFinderLayoutChange,u=i.finderHeight,c=i.finderWidth,s=i.finderX,h=i.finderY,l=i.processingReadBarcode;return{barcodeRead:a,onBarcodeRead:r?r({x:s,y:h,width:c,height:u},l):L(null!=a&&a,e,s,h,c,u,l),onBarcodeFinderLayoutChange:d}}}),k=w(y);exports.BarcodeMask=y,exports.BarcodeMaskWithOuterLayout=k,exports.useBarcodeRead=v,exports.useCustomBarcodeRead=B,exports.withOuterLayout=w;
//# sourceMappingURL=react-native-barcode-mask.cjs.production.min.js.map
