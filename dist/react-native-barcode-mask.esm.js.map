{"version":3,"file":"react-native-barcode-mask.esm.js","sources":["../src/BarcodeMask.tsx","../src/hocs/withOuterLayout.tsx","../src/hooks/useBarcodeFinder.ts","../src/hooks/useInternalBarcodeRead.ts","../src/hooks/useBarcodeReadAndroid.ts","../src/hooks/useBarcodeReadIOS.ts","../src/hooks/useCustomBarcodeReadAndroid.ts","../src/hooks/useCustomBarcodeReadIOS.ts","../src/index.ts"],"sourcesContent":["import React, { FC, memo } from 'react';\nimport { LayoutChangeEvent, StyleSheet, View, ViewStyle } from 'react-native';\nimport Animated, { Easing } from 'react-native-reanimated';\nimport { WithOuterLayoutProps } from './interfaces';\n\nconst { Value, Clock, block, cond, set, startClock, timing, eq } = Animated;\n\ntype DimensionUnit = string | number;\ntype EdgePosition = 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight';\n\n/**\n *\n */\nexport type RunTimingFn = (\n  clock: Animated.Clock,\n  value: number,\n  destination: number,\n  duration: number\n) => Animated.Node<number>;\n\nexport type OnLayoutChangeHandler = (event: LayoutChangeEvent) => void;\n\n/**\n * @name BarcodeMaskProps\n * @description Props of BarcodeMask component\n */\nexport interface BarcodeMaskProps extends WithOuterLayoutProps {\n  /**\n   * @name width\n   * @type DimensionUnit\n   * @description Width of the Barcode Finder Area\n   * @default 280\n   */\n  width?: DimensionUnit;\n  /**\n   * @name height\n   * @type DimensionUnit\n   * @description Height of the Barcode Finder Area\n   * @default 230\n   */\n  height?: DimensionUnit;\n  /**\n   * @name edgeWidth\n   * @type number\n   * @description Width of corner edges\n   * @default 20\n   */\n  edgeWidth?: number;\n  /**\n   * @name edgeHeight\n   * @type number\n   * @description Height of corner edges\n   * @default 20\n   */\n  edgeHeight?: DimensionUnit;\n  /**\n   * @name edgeColor\n   * @type string\n   * @description Color of corner edges\n   * @default #fff\n   */\n  edgeColor?: string;\n  /**\n   * @name edgeRadius\n   * @type number\n   * @description Border Radius of corner edges\n   * @default 0\n   */\n  edgeRadius?: number;\n  /**\n   * @name edgeBorderWidth\n   * @type DimensionUnit\n   * @description Thickness of corner edges\n   * @default 4\n   */\n  edgeBorderWidth?: DimensionUnit;\n  /**\n   * @name backgroundColor\n   * @type string\n   * @description Background color of Outer Finder Area\n   * @default #eee\n   */\n  backgroundColor?: string;\n  /**\n   * @name maskOpacity\n   * @type number\n   * @description Opacity of Outer Finder Area\n   * @default 1\n   */\n  maskOpacity?: number;\n  /**\n   * @name showAnimatedLine\n   * @type boolean\n   * @description Whether to show Animated Line\n   * @default true\n   */\n  showAnimatedLine?: boolean;\n  /**\n   * @name startValue\n   * @type number\n   * @description Start value of Animated Line (only applicable if `showAnimatedLine` is set to `true`)\n   * @default 0\n   */\n  startValue?: number;\n  /**\n   * @name destinationValue\n   * @type number\n   * @description Destination value of Animated Line (depends on`animatedLineOrientation`)\n   * @default Computed by the length of the respective orientation minus the `animatedLineThickness`\n   */\n  destinationValue?: number;\n  /**\n   * @name animatedComponent\n   * @type Function\n   * @param width\n   * @param height\n   */\n  animatedComponent?: (width: number, height: number) => React.ReactElement;\n  /**\n   * @name animatedLineThickness\n   * @type number\n   * @description Thickness of Animated Line\n   * @default 2\n   */\n  animatedLineThickness?: number;\n  /**\n   * @name animatedLineOrientation\n   * @type 'vertical' | 'horizontal'\n   * @description Orientation that the Animated Line will be drawn\n   * @default 'horizontal'\n   */\n  animatedLineOrientation?: 'vertical' | 'horizontal';\n  /**\n   * @name animatedLineColor\n   * @type string\n   * @description Color of Animated Line\n   * @default #fff\n   */\n  animatedLineColor?: string;\n  /**\n   * @name animationDuration\n   * @type number\n   * @description Duration of Animated Line animation (in ms)\n   * @default 2000\n   */\n  animationDuration?: number;\n  /**\n   * @name runTimingFn\n   * @type RunTimingFn\n   * @description Function to trigger the animation\n   * @default internal `runTiming` function\n   */\n  runTimingFn?: RunTimingFn;\n  /**\n   * @name onLayoutChange\n   * @type OnLayoutChangeHandler\n   * @description Handler to handle LayoutChange. Useful if you want to only detect barcode inside the Finder Area.\n   *   This will be provided from a custom hook that this library also provides.\n   * @default noop\n   */\n  onLayoutChange?: OnLayoutChangeHandler;\n}\n\nconst runTiming: RunTimingFn = (\n  clock: Animated.Clock,\n  value: number,\n  destination: number,\n  duration: number\n) => {\n  const timingState: Animated.TimingState = {\n    finished: new Value(0),\n    position: new Value(value),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n\n  const timingConfig: Animated.TimingConfig = {\n    duration,\n    toValue: new Value(destination),\n    easing: Easing.inOut(Easing.ease) as any,\n  };\n\n  return block([\n    startClock(clock),\n    timing(clock, timingState, timingConfig),\n    cond(timingState.finished, [\n      set(timingState.finished, 0),\n      set(timingState.time, 0),\n      set(timingState.frameTime, 0),\n      set(\n        timingState.position,\n        cond(eq(timingState.position, destination), destination, value)\n      ),\n      set(\n        timingConfig.toValue as Animated.Value<number>,\n        cond(eq(timingState.position, destination), value, destination)\n      ),\n    ]),\n    timingState.position,\n  ]);\n};\n\nconst noop = () => {};\n\nexport const BarcodeMask: FC<BarcodeMaskProps> = memo(\n  ({\n    width,\n    height,\n    startValue,\n    destinationValue,\n    backgroundColor,\n    edgeBorderWidth,\n    edgeColor,\n    edgeHeight,\n    edgeWidth,\n    edgeRadius,\n    maskOpacity,\n    animatedComponent,\n    animatedLineColor,\n    animatedLineOrientation,\n    animatedLineThickness,\n    animationDuration,\n    showAnimatedLine,\n    runTimingFn,\n    onLayoutChange,\n    outerBoundingRect,\n    onOuterLayout,\n  }) => {\n    const edgeBorderStyle = React.useRef<\n      {\n        [position in EdgePosition]: ViewStyle;\n      }\n    >({\n      topRight: {\n        borderRightWidth: edgeBorderWidth as number,\n        borderTopWidth: edgeBorderWidth as number,\n        borderTopRightRadius: edgeRadius,\n        top: -(edgeBorderWidth as number),\n        right: -(edgeBorderWidth as number),\n      },\n      topLeft: {\n        borderTopWidth: edgeBorderWidth as number,\n        borderLeftWidth: edgeBorderWidth as number,\n        borderTopLeftRadius: edgeRadius,\n        top: -(edgeBorderWidth as number),\n        left: -(edgeBorderWidth as number),\n      },\n      bottomRight: {\n        borderBottomWidth: edgeBorderWidth as number,\n        borderRightWidth: edgeBorderWidth as number,\n        borderBottomRightRadius: edgeRadius,\n        bottom: -(edgeBorderWidth as number),\n        right: -(edgeBorderWidth as number),\n      },\n      bottomLeft: {\n        borderBottomWidth: edgeBorderWidth as number,\n        borderLeftWidth: edgeBorderWidth as number,\n        borderBottomLeftRadius: edgeRadius,\n        bottom: -(edgeBorderWidth as number),\n        left: -(edgeBorderWidth as number),\n      },\n    });\n\n    const _animatedLineDimension = (\n      dimension: DimensionUnit | undefined,\n      outerDimension: 'width' | 'height'\n    ) => {\n      const outer = outerBoundingRect?.[outerDimension] ?? 0;\n      if (dimension) {\n        if (typeof dimension === 'number') {\n          return dimension * 0.9;\n        }\n        return dimension.endsWith('%')\n          ? (Number(dimension.split('%')[0]) / 100) * (outer || 1) * 0.9\n          : Number(dimension.split(/\\d+/)[0]) * (outer || 1) * 0.9;\n      }\n      return outer * 0.9;\n    };\n\n    const _animatedValue = (\n      dimension: DimensionUnit | undefined,\n      outerDimension: 'width' | 'height'\n    ) => {\n      const calculatedDimension = _animatedLineDimension(\n        dimension,\n        outerDimension\n      );\n      const fullDimension = calculatedDimension / 0.9;\n\n      return fullDimension - (animatedLineThickness as number);\n    };\n\n    const _animatedLineStyle = () => {\n      if (animatedLineOrientation === 'horizontal') {\n        const _width = _animatedLineDimension(width, 'width');\n        const destination = _animatedValue(height, 'height');\n        return {\n          ...styles.animatedLine,\n          height: animatedLineThickness,\n          width: _width,\n          backgroundColor: animatedLineColor,\n          top: runTimingFn!(\n            new Clock(),\n            startValue || 0,\n            destinationValue || destination,\n            animationDuration as number\n          ),\n        };\n      }\n      const _height = _animatedLineDimension(height, 'height');\n      const destination = _animatedValue(width, 'width');\n      return {\n        ...styles.animatedLine,\n        width: animatedLineThickness,\n        height: _height,\n        backgroundColor: animatedLineColor,\n        left: runTimingFn!(\n          new Clock(),\n          startValue || 0,\n          destinationValue || destination,\n          animationDuration as number\n        ),\n      };\n    };\n\n    const _renderEdge = (edgePosition: EdgePosition) => {\n      const defaultStyle = {\n        width: edgeWidth,\n        height: edgeHeight,\n        borderColor: edgeColor,\n        zIndex: 2,\n      };\n      return (\n        <View\n          style={{\n            ...defaultStyle,\n            ...styles[edgePosition],\n            ...edgeBorderStyle.current[edgePosition],\n          }}\n        />\n      );\n    };\n\n    const _width = _animatedLineDimension(width, 'width') / 0.9;\n    const _height = _animatedLineDimension(height, 'height') / 0.9;\n\n    const _renderAnimated = () => {\n      if (showAnimatedLine) {\n        if (animatedComponent) {\n          return animatedComponent(_width, _height);\n        }\n\n        return <Animated.View style={_animatedLineStyle()} />;\n      }\n\n      return null;\n    };\n\n    return (\n      <View style={styles.container}>\n        <View\n          onLayout={onLayoutChange || noop}\n          style={{\n            ...styles.finder,\n            width: _width,\n            height: _height,\n          }}\n        >\n          {_renderEdge('topLeft')}\n          {_renderEdge('topRight')}\n          {_renderEdge('bottomLeft')}\n          {_renderEdge('bottomRight')}\n          {_renderAnimated()}\n        </View>\n        <View style={styles.maskOuter} onLayout={onOuterLayout || noop}>\n          <View\n            style={{\n              ...styles.maskRow,\n              ...{ backgroundColor, opacity: maskOpacity, flex: 1 },\n            }}\n          />\n          <View style={{ height, ...styles.maskCenter }}>\n            <View style={{ backgroundColor, opacity: maskOpacity, flex: 1 }} />\n            <View\n              style={{\n                ...styles.maskInner,\n                width,\n                height,\n                borderRadius: edgeRadius,\n              }}\n            />\n            <View style={{ backgroundColor, opacity: maskOpacity, flex: 1 }} />\n          </View>\n          <View\n            style={{\n              ...styles.maskRow,\n              ...{ backgroundColor, opacity: maskOpacity, flex: 1 },\n            }}\n          />\n        </View>\n      </View>\n    );\n  }\n);\n\nBarcodeMask.defaultProps = {\n  width: 280,\n  height: 230,\n  edgeWidth: 20,\n  edgeHeight: 20,\n  edgeColor: '#fff',\n  edgeBorderWidth: 4,\n  edgeRadius: 0,\n  backgroundColor: '#eee',\n  maskOpacity: 1,\n  animatedLineColor: '#fff',\n  animatedLineOrientation: 'horizontal',\n  animatedLineThickness: 2,\n  animationDuration: 2000,\n  runTimingFn: runTiming,\n  showAnimatedLine: true,\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...StyleSheet.absoluteFillObject,\n  },\n  finder: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1,\n  },\n  maskOuter: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n  },\n  maskInner: {\n    backgroundColor: 'transparent',\n  },\n  maskRow: {\n    width: '100%',\n  },\n  maskCenter: {\n    flexDirection: 'row',\n    display: 'flex',\n  },\n  topLeft: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n  },\n  topRight: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n  },\n  bottomLeft: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n  },\n  bottomRight: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n  },\n  animatedLine: {\n    position: 'absolute',\n    zIndex: 1,\n  },\n});\n","import React, { ComponentType, PureComponent } from 'react';\nimport { LayoutChangeEvent } from 'react-native';\nimport { BoundingRect, Optionalize, WithOuterLayoutProps } from '../interfaces';\n\nexport interface WithOuterLayoutHocState {\n  boundingRect: BoundingRect;\n}\n\nexport const withOuterLayout = <\n  T extends WithOuterLayoutProps = WithOuterLayoutProps\n>(\n  WrappedComponent: ComponentType<T>\n) => {\n  const displayName =\n    WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n  return class ComponentWithOuterLayout extends PureComponent<\n    Optionalize<T, WithOuterLayoutProps>,\n    WithOuterLayoutHocState\n  > {\n    public static displayName = `withOuterLayout${displayName}`;\n\n    state: WithOuterLayoutHocState = {\n      boundingRect: { x: 0, y: 0, width: 0, height: 0 },\n    };\n\n    onOuterLayout = (event: LayoutChangeEvent): void => {\n      const {\n        nativeEvent: { layout },\n      } = event;\n      this.setState({ boundingRect: layout });\n    };\n\n    render() {\n      return (\n        <WrappedComponent\n          outerBoundingRect={this.state.boundingRect}\n          onOuterLayout={this.onOuterLayout}\n          {...(this.props as T)}\n        />\n      );\n    }\n  };\n};\n","import { Reducer, useCallback, useReducer, useState } from 'react';\nimport { LayoutChangeEvent } from 'react-native';\nimport { BoundingRect, CustomBarcodeRead } from '../interfaces';\n\n/**\n * @internal\n * @param dataProcessor\n * @param onScannedData\n * @param customBarcodeRead\n */\nexport default (\n  dataProcessor: (data: string) => string,\n  onScannedData: (processed: string) => void,\n  customBarcodeRead?: CustomBarcodeRead | number\n) => {\n  const [barcodeRead, setBarcodeRead] = useState(false);\n  const [state, dispatch] = useReducer<\n    Reducer<\n      BoundingRect,\n      {\n        type: 'SET';\n        payload: BoundingRect;\n      }\n    >\n  >(\n    (prev, action) => {\n      switch (action.type) {\n        case 'SET': {\n          return { ...prev, ...action.payload };\n        }\n        default: {\n          return prev;\n        }\n      }\n    },\n    {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0,\n    }\n  );\n  const _onBarcodeFinderLayoutChange = useCallback(\n    (event: LayoutChangeEvent) => {\n      const {\n        nativeEvent: {\n          layout: { height, width, x, y },\n        },\n      } = event;\n      dispatch({ type: 'SET', payload: { height, width, x, y } });\n    },\n    [state.height, state.width, state.x, state.y]\n  );\n\n  let timeoutId;\n  let processingReadBarcode: (data: string) => void;\n\n  if (\n    !customBarcodeRead ||\n    (customBarcodeRead && typeof customBarcodeRead === 'number')\n  ) {\n    timeoutId && clearTimeout(timeoutId);\n    processingReadBarcode = data => {\n      setBarcodeRead(true);\n      onScannedData(dataProcessor(data));\n      timeoutId = setTimeout(() => {\n        setBarcodeRead(false);\n      }, customBarcodeRead);\n    };\n  } else {\n    processingReadBarcode = data => {\n      (customBarcodeRead as CustomBarcodeRead)?.beforeScan?.();\n      onScannedData(dataProcessor(data));\n      (customBarcodeRead as CustomBarcodeRead)?.afterScan?.();\n    };\n  }\n\n  return {\n    barcodeRead:\n      customBarcodeRead && typeof customBarcodeRead === 'object'\n        ? null\n        : barcodeRead,\n    finderX: state.x,\n    finderY: state.y,\n    finderWidth: state.width,\n    finderHeight: state.height,\n    onBarcodeFinderLayoutChange: _onBarcodeFinderLayoutChange,\n    processingReadBarcode,\n  };\n};\n","import { useCallback } from 'react';\nimport { PixelRatio, Platform } from 'react-native';\nimport { BarCodeType, Point, RNCamera, Size } from 'fleetback-react-native-camera';\n\nconst useInternalBarcodeReadIOS = (\n  barcodeRead: boolean,\n  isFocused: boolean,\n  finderX: number,\n  finderY: number,\n  finderWidth: number,\n  finderHeight: number,\n  processingReadBarcode: (data: string) => void\n) =>\n  useCallback(\n    (event: {\n      data: string;\n      bounds:\n        | { width: number; height: number; origin: Array<Point<string>> }\n        | { origin: Point<string>; size: Size<string> };\n      type: keyof BarCodeType;\n    }) => {\n      if (!isFocused || barcodeRead) {\n        return;\n      }\n\n      const {\n        origin: { x, y },\n        size: { width, height },\n      } = event.bounds as { origin: Point<string>; size: Size<string> };\n\n      if (\n        Number(x) >= finderX &&\n        Number(x) + Number(width) <= finderX + finderWidth &&\n        Number(y) >= finderY &&\n        Number(y) + Number(height) <= finderY + finderHeight\n      ) {\n        return processingReadBarcode(event.data);\n      }\n    },\n    [\n      barcodeRead,\n      isFocused,\n      finderX,\n      finderY,\n      finderWidth,\n      finderHeight,\n      processingReadBarcode,\n    ]\n  );\n\nconst useInternalBarcodeReadAndroid = (\n  barcodeRead: boolean,\n  isFocused: boolean,\n  finderX: number,\n  finderY: number,\n  finderWidth: number,\n  finderHeight: number,\n  processingReadBarcode: (data: string) => void\n) =>\n  useCallback(\n    (event: {\n      data: string;\n      bounds:\n        | { width: number; height: number; origin: Array<Point<string>> }\n        | { origin: Point<string>; size: Size<string> };\n      type: keyof BarCodeType;\n    }) => {\n      if (!isFocused || barcodeRead) {\n        return;\n      }\n\n      const _bounds = event.bounds as {\n        width: number;\n        height: number;\n        origin: Point<string>[];\n      };\n      const _pointBounds = _bounds.origin.map(point => ({\n        x: Number(point.x) / PixelRatio.get(),\n        y: Number(point.y) / PixelRatio.get(),\n      }));\n\n      const _insideBox = (point: { x: number; y: number }) => {\n        const { x, y } = point;\n        return (\n          x >= finderX &&\n          x <= finderX + finderWidth &&\n          y >= finderY &&\n          y <= finderY + finderHeight\n        );\n      };\n\n      /**\n       *  0 --------------- 2\n       *  |  PDF417         |\n       *  | /////////////// |\n       *  1 --------------- 3\n       */\n      if (event.type === RNCamera.Constants.BarCodeType.pdf417) {\n        const [topLeft, bottomLeft, topRight, bottomRight] = _pointBounds;\n        if (\n          _insideBox(topLeft) &&\n          _insideBox(bottomLeft) &&\n          _insideBox(topRight) &&\n          _insideBox(bottomRight)\n        ) {\n          processingReadBarcode(event.data);\n          return;\n        }\n      }\n\n      /**\n       *  2 ------ 3\n       *  |\n       *  | QR Code\n       *  |\n       *  1 ------ 0\n       */\n      if (event.type === RNCamera.Constants.BarCodeType.qr) {\n        const [bottomRight, bottomLeft, topLeft, topRight] = _pointBounds;\n        if (\n          _insideBox(bottomRight) &&\n          _insideBox(bottomLeft) &&\n          _insideBox(topLeft) &&\n          _insideBox(topRight)\n        ) {\n          processingReadBarcode(event.data);\n          return;\n        }\n      }\n    },\n    [\n      barcodeRead,\n      isFocused,\n      finderX,\n      finderY,\n      finderWidth,\n      finderHeight,\n      processingReadBarcode,\n    ]\n  );\n\nexport default Platform.select({\n  android: useInternalBarcodeReadAndroid,\n  ios: useInternalBarcodeReadIOS,\n}) as typeof useInternalBarcodeReadAndroid;\n","import useBarcodeFinder from './useBarcodeFinder';\nimport useInternalBarcodeRead from './useInternalBarcodeRead';\n\nexport default (\n  isFocused: boolean,\n  dataProcessor: (data: string) => string,\n  onScannedData: (processed: string) => void,\n  barcodeReadDelay: number = 500\n) => {\n  const {\n    barcodeRead,\n    onBarcodeFinderLayoutChange,\n    finderY,\n    finderX,\n    finderWidth,\n    finderHeight,\n    processingReadBarcode,\n  } = useBarcodeFinder(dataProcessor, onScannedData, barcodeReadDelay);\n\n  const onBarcodeRead = useInternalBarcodeRead(\n    barcodeRead != null ? barcodeRead : false,\n    isFocused,\n    finderX,\n    finderY,\n    finderWidth,\n    finderHeight,\n    processingReadBarcode\n  );\n\n  return {\n    barcodeRead,\n    onBarcodeRead,\n    onBarcodeFinderLayoutChange,\n  };\n};\n","import useBarcodeFinder from './useBarcodeFinder';\nimport useInternalBarcodeRead from './useInternalBarcodeRead';\n\nexport default (\n  isFocused: boolean,\n  dataProcessor: (data: string) => string,\n  onScannedData: (processed: string) => void,\n  barcodeReadDelay: number = 500\n) => {\n  const {\n    barcodeRead,\n    onBarcodeFinderLayoutChange,\n    finderY,\n    finderX,\n    finderWidth,\n    finderHeight,\n    processingReadBarcode,\n  } = useBarcodeFinder(dataProcessor, onScannedData, barcodeReadDelay);\n\n  const onBarcodeRead = useInternalBarcodeRead(\n    barcodeRead != null ? barcodeRead : false,\n    isFocused,\n    finderX,\n    finderY,\n    finderWidth,\n    finderHeight,\n    processingReadBarcode\n  );\n\n  return {\n    barcodeRead,\n    onBarcodeRead,\n    onBarcodeFinderLayoutChange,\n  };\n};\n","import { CustomBarcodeRead, CustomBarcodeReadCallback } from '../interfaces';\nimport useBarcodeFinder from './useBarcodeFinder';\nimport useInternalBarcodeRead from './useInternalBarcodeRead';\n\nexport default (\n  isFocused: boolean,\n  dataProcessor: (data: string) => string,\n  onScannedData: (processed: string) => void,\n  customBarcodeRead: CustomBarcodeRead,\n  customBarcodeReadCallback: CustomBarcodeReadCallback\n) => {\n  const {\n    barcodeRead,\n    onBarcodeFinderLayoutChange,\n    finderY,\n    finderX,\n    finderWidth,\n    finderHeight,\n    processingReadBarcode,\n  } = useBarcodeFinder(dataProcessor, onScannedData, customBarcodeRead);\n\n  return {\n    barcodeRead,\n    onBarcodeRead: customBarcodeReadCallback\n      ? customBarcodeReadCallback(\n          {\n            x: finderX,\n            y: finderY,\n            width: finderWidth,\n            height: finderHeight,\n          },\n          processingReadBarcode\n        )\n      : useInternalBarcodeRead(\n          barcodeRead != null ? barcodeRead : false,\n          isFocused,\n          finderX,\n          finderY,\n          finderWidth,\n          finderHeight,\n          processingReadBarcode\n        ),\n    onBarcodeFinderLayoutChange,\n  };\n};\n","import { CustomBarcodeRead, CustomBarcodeReadCallback } from 'interfaces';\nimport useBarcodeFinder from './useBarcodeFinder';\nimport useInternalBarcodeRead from './useInternalBarcodeRead';\n\nexport default (\n  isFocused: boolean,\n  dataProcessor: (data: string) => string,\n  onScannedData: (processed: string) => void,\n  customBarcodeRead: CustomBarcodeRead,\n  customBarcodeReadCallback: CustomBarcodeReadCallback\n) => {\n  const {\n    barcodeRead,\n    onBarcodeFinderLayoutChange,\n    finderHeight,\n    finderWidth,\n    finderX,\n    finderY,\n    processingReadBarcode,\n  } = useBarcodeFinder(dataProcessor, onScannedData, customBarcodeRead);\n\n  return {\n    barcodeRead,\n    onBarcodeRead: customBarcodeReadCallback\n      ? customBarcodeReadCallback(\n          {\n            x: finderX,\n            y: finderY,\n            width: finderWidth,\n            height: finderHeight,\n          },\n          processingReadBarcode\n        )\n      : useInternalBarcodeRead(\n          barcodeRead != null ? barcodeRead : false,\n          isFocused,\n          finderX,\n          finderY,\n          finderWidth,\n          finderHeight,\n          processingReadBarcode\n        ),\n    onBarcodeFinderLayoutChange,\n  };\n};\n","import { Platform } from 'react-native';\nimport { BarcodeMask } from './BarcodeMask';\nimport { withOuterLayout } from './hocs';\nimport {\n  useBarcodeReadAndroid,\n  useBarcodeReadIOS,\n  useCustomBarcodeReadAndroid,\n  useCustomBarcodeReadIOS,\n} from './hooks';\nimport {\n  BoundingRect,\n  CustomBarcodeRead,\n  CustomBarcodeReadCallback,\n  WithOuterLayoutProps,\n} from './interfaces';\n\nconst useBarcodeRead = Platform.select({\n  android: useBarcodeReadAndroid,\n  ios: useBarcodeReadIOS,\n}) as typeof useBarcodeReadIOS;\n\nconst useCustomBarcodeRead = Platform.select({\n  android: useCustomBarcodeReadAndroid,\n  ios: useCustomBarcodeReadIOS,\n}) as typeof useCustomBarcodeReadIOS;\n\nconst BarcodeMaskWithOuterLayout = withOuterLayout(BarcodeMask);\n\nexport {\n  BarcodeMask,\n  BarcodeMaskWithOuterLayout,\n  useBarcodeRead,\n  useCustomBarcodeRead,\n  CustomBarcodeRead,\n  CustomBarcodeReadCallback,\n  BoundingRect,\n  WithOuterLayoutProps,\n  withOuterLayout,\n};\n"],"names":["Value","Animated","Clock","block","cond","set","startClock","timing","eq","runTiming","clock","value","destination","duration","timingState","finished","position","time","frameTime","timingConfig","toValue","easing","Easing","inOut","ease","noop","BarcodeMask","memo","_ref","width","height","startValue","destinationValue","backgroundColor","edgeBorderWidth","edgeColor","edgeHeight","edgeWidth","edgeRadius","maskOpacity","animatedComponent","animatedLineColor","animatedLineOrientation","animatedLineThickness","animationDuration","showAnimatedLine","runTimingFn","onLayoutChange","outerBoundingRect","onOuterLayout","edgeBorderStyle","React","useRef","topRight","borderRightWidth","borderTopWidth","borderTopRightRadius","top","right","topLeft","borderLeftWidth","borderTopLeftRadius","left","bottomRight","borderBottomWidth","borderBottomRightRadius","bottom","bottomLeft","borderBottomLeftRadius","_animatedLineDimension","dimension","outerDimension","outer","_outerBoundingRect$ou","endsWith","Number","split","_animatedValue","calculatedDimension","fullDimension","_animatedLineStyle","_width","_extends","styles","animatedLine","_height","_renderEdge","edgePosition","defaultStyle","borderColor","zIndex","View","style","current","_renderAnimated","container","onLayout","finder","maskOuter","maskRow","opacity","flex","maskCenter","maskInner","borderRadius","defaultProps","StyleSheet","create","alignItems","justifyContent","absoluteFillObject","flexDirection","display","withOuterLayout","WrappedComponent","displayName","name","ComponentWithOuterLayout","_this","boundingRect","x","y","event","layout","nativeEvent","setState","_proto","prototype","render","state","props","PureComponent","_a","dataProcessor","onScannedData","customBarcodeRead","_useState","useState","barcodeRead","setBarcodeRead","_useReducer","useReducer","prev","action","type","payload","dispatch","_onBarcodeFinderLayoutChange","useCallback","_event$nativeEvent$la","timeoutId","processingReadBarcode","clearTimeout","data","setTimeout","beforeScan","afterScan","finderX","finderY","finderWidth","finderHeight","onBarcodeFinderLayoutChange","useInternalBarcodeReadIOS","isFocused","_event$bounds","bounds","_event$bounds$origin","origin","_event$bounds$size","size","useInternalBarcodeReadAndroid","_bounds","_pointBounds","map","point","PixelRatio","get","_insideBox","RNCamera","Constants","BarCodeType","pdf417","qr","Platform","select","android","ios","barcodeReadDelay","_useBarcodeFinder","useBarcodeFinder","onBarcodeRead","useInternalBarcodeRead","customBarcodeReadCallback","useBarcodeRead","useBarcodeReadAndroid","useBarcodeReadIOS","useCustomBarcodeRead","useCustomBarcodeReadAndroid","useCustomBarcodeReadIOS","BarcodeMaskWithOuterLayout"],"mappings":"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"}